---
title: Search
description: Search through and find the posts and links on my site.
layout: default
permalink: /search.html
---
<script src="/assets/scripts/components/minisearch.js?v={% appVersion %}"></script>
<script type="module">
  (() => {
    const miniSearch = new MiniSearch({
      fields: ['title', 'text', 'tags']
    })

    const $form = document.querySelector('.search__form')
    const $input = document.querySelector('.search__form--input')
    const $fallback = document.querySelector('.search__form--fallback')
    const $results = document.querySelector('.search__results')

    // remove noscript fallbacks
    $form.removeAttribute('action')
    $form.removeAttribute('method')
    $fallback.remove()

    const index = {{ collections.searchIndex | json }}
    const resultsById = index.reduce((byId, result) => {
      byId[result.id] = result
      return byId
    }, {})
    miniSearch.addAll(index)

    $input.addEventListener('input', () => {
      const query = $input.value
      const results = (query.length > 1) ? getSearchResults(query) : []
      if (query.length === 0) {
        // Clear the results when input is empty
        renderSearchResults([])
      } else {
        if (query.length > 1) {
          try { 
            umami.trackEvent('Search', { query: query })
          } catch (err) {}
        }
        renderSearchResults(results, query)
      }
    })

    $input.addEventListener('keydown', (event) => {
      if (event.key === 'Enter') event.preventDefault()
    })

    const getSearchResults = (query) => miniSearch.search(query, { prefix: true, fuzzy: 0.2, boost: { title: 2 } }).map(({ id }) => resultsById[id])

    const renderSearchResults = (results, query = '') => {
      if (results.length > 0) {
        $results.innerHTML = results.map(({ title, url }) => {
          return `<li class="search__results--result"><a href="${url}">${title}</a></li>`
        }).join('\n')
        $results.style.display = 'block'
      } else {
        if (query.trim() !== '') {
          $results.innerHTML = `<li class="search__results--no-results">No results found for "${query}"</li>`
        } else {
          $results.innerHTML = ''
        }
        $results.style.display = 'block'
      }
    }
  })()
</script>
<h2>Search</h2>
<p>You can find <a href="/posts">posts</a>, <a href="/links">links</a>, <a href="/music/#artists">artists</a>, genres, <a href="/watching#movies">movies</a>, <a href="/watching#tv">shows</a> and <a href="/books">books</a> via the field below (though it only surfaces movies and books I've written something about).</p>
<noscript>
  <p><strong class="highlight-text">If you're seeing this it means that you've (quite likely) disabled JavaScript (that's a totally valid choice!).</strong> You can search for anything on my site using the form below, but your query will be routed through <a href="https://duckduckgo.com">DuckDuckGo</a>.</p>
  <p><strong class="highlight-text">Type something in and hit enter.</strong></p>
</noscript>
<form class="search__form" action="https://duckduckgo.com" method="get">
  <input class="search__form--input" placeholder="Search" type="search" name="q" autocomplete="off" autofocus>
  <input class="search__form--fallback" type="hidden" placeholder="Type away..." name="sites" value="coryd.dev">
</form>
<ul class="search__results"></ul>