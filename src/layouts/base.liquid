{%- assign updateTime = "" -%}
{%- if updated == "now" -%}
  {%- assign updateTime = 'now' | date: "%B %-d, %l:%M %P", "America/Los_Angeles" -%}
{%- elsif page.updated -%}
  {%- assign updateTime = page.updated | date: "%B %-d, %l:%M %P", "America/Los_Angeles" -%}
{%- endif -%}
<!doctype html>
<html lang="{{ globals.lang }}">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="color-scheme" content="light dark">
    <link rel="preload" href="/assets/fonts/ml.woff2" as="font" type="font/woff2" crossorigin="anonymous">
    <link rel="preload" href="/assets/fonts/mlb.woff2" as="font" type="font/woff2" crossorigin="anonymous">
    <link rel="stylesheet" href="/assets/styles/index.css?v={% appVersion %}" type="text/css" />
    {% render "metadata.liquid",
      globals:globals,
      schema:schema,
      title:title,
      page:page,
      post:post,
      year:year,
      music:music,
      books:books,
      featuredMovie:featuredMovie,
      featuredShow:featuredShow,
      featuredBook:featuredBook,
    %}
    <meta name="theme-color" content="{{ globals.theme_color }}" />
    <meta name="fediverse:creator" content="{{ globals.mastodon }}" />
    <meta name="generator" content="Eleventy">
    <meta name="robots" content="noai, noimageai">
    <link href="{{ globals.cdn_url }}{{ globals.avatar_transparent }}?class=w50&v={% appVersion %}" rel="icon" sizes="any">
    <link href="{{ globals.cdn_url }}{{ globals.avatar_transparent }}?class=w50&v={% appVersion %}&type=svg" rel="icon" type="image/svg+xml">
    <link href="{{ globals.cdn_url }}{{ globals.avatar }}?class=w800&v={% appVersion %}" rel="apple-touch-icon">
    <link type="application/atom+xml" rel="alternate" title="Posts / {{ globals.site_name }}" href="https://coryd.dev/feeds/posts">
    <link rel="alternate" href="https://coryd.dev/feeds/links" title="Links / {{ globals.site_name }}" type="application/rss+xml">
    <link rel="alternate" href="https://coryd.dev/feeds/movies" title="Movies / {{ globals.site_name }}'s movies feed" type="application/rss+xml">
    <link rel="alternate" href="https://coryd.dev/feeds/books" title="Books / {{ globals.site_name }}" type="application/rss+xml">
    <link rel="alternate" href="https://coryd.dev/feeds/album-releases" title="Album releases / {{ globals.site_name }}" type="application/rss+xml">
    <link rel="alternate" href="https://coryd.dev/feeds/all" title="All activity / {{ globals.site_name }}" type="application/rss+xml">
    <script defer src="/assets/scripts/index.js?v={% appVersion %}"></script>
    <script defer data-domain="coryd.dev" src="/js/script.js"></script>
    <script>window.plausible = window.plausible || function() { (window.plausible.q = window.plausible.q || []).push(arguments) }</script>
    <noscript>
      <style>.client-side {display:none}</style>
    </noscript>
  </head>
  <body>
    <script>
      (() => {
        const currentTheme = sessionStorage.getItem('theme');
        const metaColorScheme = document.querySelector('meta[name="color-scheme"]');
        const prefersDarkScheme = window.matchMedia('(prefers-color-scheme: dark)').matches;
        const themeToSet = currentTheme || (prefersDarkScheme ? 'dark' : 'light');
        if (!currentTheme) sessionStorage.setItem('theme', themeToSet);
        metaColorScheme.setAttribute('content', themeToSet);
      })();
    </script>
    <div class="main-wrapper">
      <main>
        {% render "header.liquid", globals:globals, page:page, nav:nav %}
        <div class="default-wrapper" data-dynamic="page">
          {{ content }}
        </div>
      </main>
      {% render "footer.liquid", page:page, nav:nav, updated:updateTime %}
    </div>
  </body>
</html>