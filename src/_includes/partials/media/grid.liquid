{% assign hidePagination = count or data.pages.size <= 1 %}
{% assign media = data.items | default: data | normalizeMedia %}
<div class="media-grid {% if shape == 'square' %}square{% else %}vertical{% endif %}">
  {% for item in media limit: count | default: media.size %}
    {% assign alt = item.alt | strip | escape %}
    <a href="{{ item.url }}" title="{{ alt }}">
      <div class="item-wrapper shadow">
        <div class="meta-text">
          {% if item.title %}
            <div class="header">{{ item.title }}</div>
          {% endif %}
          {% if item.plays %}
            <div class="subheader">{{ item.plays }} plays</div>
          {% elsif item.subtext %}
            <div class="subheader">{{ item.subtext }}</div>
          {% endif %}
        </div>
        {% assign loadingStrategy = loading | default: 'lazy' %}
        {% if shape == 'square' %}
          <img
            src="{{ item.image }}"
            alt="{{ alt }}"
            loading="{{ loadingStrategy }}"
            decoding="async"
            width="240"
            height="240"
          />
        {% else %}
          <img
            src="{{ item.image }}"
            alt="{{ alt }}"
            loading="{{ loadingStrategy }}"
            decoding="async"
            width="200"
            height="307"
          />
        {% endif %}
      </div>
    </a>
  {% endfor %}
</div>
{% unless hidePagination %}
  {% render "partials/widgets/paginator.liquid", pagination:data %}
{% endunless %}